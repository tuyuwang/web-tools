# 包大小监控指南

## 目标
确保发布包压缩后大小不超过25MB

## 当前状态
- **构建产物**: 1.3MB (JS + CSS)
- **完整构建**: 64MB (.next 文件夹)
- **压缩包**: 25MB (刚好达到限制)

## 优化策略

### 1. 构建优化
- ✅ 启用SWC压缩
- ✅ 优化包导入
- ✅ 代码分割
- ✅ 禁用生产环境source maps

### 2. 依赖优化
- ✅ 使用轻量级图标库 (lucide-react)
- ✅ 最小化依赖包数量
- ✅ 移除未使用的依赖

### 3. 静态资源优化
- ✅ 图片格式优化 (WebP, AVIF)
- ✅ 静态资源压缩
- ✅ 缓存策略

### 4. 代码优化
- ✅ 动态导入
- ✅ 树摇优化
- ✅ 移除console.log

## 监控命令

```bash
# 检查构建大小
npm run size-check

# 分析包大小
npm run analyze

# 优化构建
npm run build:optimized
```

## 警告阈值
- **警告**: > 20MB
- **错误**: > 25MB

## 持续优化建议

### 短期优化
1. 监控新添加的依赖包大小
2. 定期清理未使用的代码
3. 优化图片资源

### 长期优化
1. 考虑使用CDN加载大型库
2. 实现按需加载
3. 使用Web Workers处理复杂计算

## 检查清单

### 添加新功能前
- [ ] 评估新依赖包大小
- [ ] 考虑替代方案
- [ ] 测试对总包大小的影响

### 发布前
- [ ] 运行 `npm run size-check`
- [ ] 确认包大小 < 25MB
- [ ] 优化大型文件
- [ ] 更新此文档

## 历史记录

| 日期 | 包大小 | 变更 | 原因 |
|------|--------|------|------|
| 2024-01-XX | 25MB | 初始构建 | 项目初始化 | 